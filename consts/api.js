const getPostPositionPrompt = (withStructure) => {
  const basePrompt =
    "ì•„ëž˜ ê¸€ì—ì„œ ë‹¨ì–´ì™€ ë¶™ì–´ìžˆëŠ” ì¡°ì‚¬ê°€ ë§žì§€ì•ŠëŠ” ë¶€ë¶„ì´ ìžˆì–´. ë‹¨ì–´ì™€ ì¡°ì‚¬ ì‚¬ìš©ì´ ìžì—°ìŠ¤ëŸ½ë„ë¡ ìˆ˜ì •í•´ì„œ ì¶œë ¥í•´ì¤˜. ëŒ€ì‹  ë³„ë„ì˜ ê°€ì´ë“œ ë¬¸êµ¬ ì—†ì´ ê²°ê³¼ê°’ë§Œ ì¶œë ¥í•´ì£¼ë©´ ë¼.";
  if (withStructure) {
    return `${basePrompt} ì¶”ê°€ì ìœ¼ë¡œ í˜„ìž¬ ë‚´ìš© ê¸°ì¤€ìœ¼ë¡œ ë¬¸ìž¥ í˜•ì‹ì´ë‚˜ êµ¬ì¡°ê°€ ë‹¤ë¥¸ ì°½ì˜ì ì¸ êµ¬ì¡°ë¡œ ë§ˆì¹˜ ë‹¤ë¥¸ ì‚¬ëžŒì´ ì“´ ê¸€ì²˜ëŸ¼ ë‹¤ì‹œ ê¸€ì„ ë§Œë“¤ì–´ ì¤˜. ëŒ€ì‹  ì¡°ê±´ì€ ê¸°ì¡´ í•µì‹¬ í‚¤ì›Œë“œ ë° ì˜ë¯¸ëŠ” ë³€í•˜ì§€ ì•Šê²Œ í•´ì¤˜. ê·¸ë¦¬ê³  ëª¨ë°”ì¼ì—ì„œë„ í•´ë‹¹ ê¸€ì„ ì½ì„ ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— ê°€ë…ì„± ë†’ì€ êµ¬ì¡°ë¡œ ê° ë¬¸ìž¥ì˜ ê¸¸ì´ê°€ ë„ˆë¬´ í¬ì§€ ì•Šê²Œ ì¤„ì—¬ì¤˜. ê·¸ë¦¬ê³  ë¬¸ìž¥ì´ë‚˜ ë‹¨ë½ì„ êµ¬ë¶„í•  ë•Œ ì•„ëž˜ ì´ëª¨ì§€ë“¤ì„ ì´ìš©í•´ì„œ ë§Œë“¤ì–´ì¤˜.\n âœ… âœ” ðŸ“Œ 1ï¸âƒ£ 2ï¸âƒ£ 3ï¸âƒ£ 4ï¸âƒ£ 5ï¸âƒ£ ðŸ”ŽðŸ”‘ðŸ“ƒðŸ“„ðŸ“‘âœ’ðŸ–ðŸ“ðŸŽ¯`;
  }
  return basePrompt;
};

const openAiApiUrl = "https://api.openai.com/v1/chat/completions";
/**
 *
 * @param {"keyword" | "sentence" | "article" | "keyword2" } type
 * @returns
 */
const getMainPrompt = (type) => {
  const mapTypeToPrompt = {
    keyword: `ë¨¼ì € ì•„ëž˜ ê¸€ì—ì„œ ëª¨ë“  ë‹¨ì–´ë¥¼ ì¶”ì¶œí•´ì¤˜. ë‹¨ ì¤‘ë³µì—†ì´ ë½‘ì•„ì£¼ê³ , ê¸°ì—…ëª…ì€ ì œì™¸í•´ì¤˜. ê·¸ë¦¬ê³  ë½‘ì€ ë‹¨ì–´ë“¤ì€ Aë¼ê³  ê°€ì •í•˜ìž. ê·¸ë¦¬ê³  ê° Aë‹¨ì–´ì™€ ê°™ì€ ì˜ë¯¸ë¥¼ ê°€ì§€ì§€ë§Œ ë‹¤ë¥¸ ë¬¸ìžê°’(í•œêµ­ì–´)ì„ ê°€ì§€ëŠ” ê²ƒë“¤ì„ ê° Nê°œ, A[1] ~ A[N](ì—¬ê¸°ì„œ A[1] ~ A[N]ëŠ” Aì™€ ì˜ë¯¸ëŠ” ê°™ì§€ë§Œ ë‹¤ë¥¸ ë‹¨ì–´ë“¤ì„ ì˜ë¯¸í•´. ìµœì†Œ 20ê°œê¹Œì§€ ì¶”ì²œí•´ì¤˜.) ë¼ê³  ê°€ì •í•˜ìž. ê·¸ë¦¬ê³  í•´ë‹¹ ê°’ë“¤ì„ javascriptì˜ ê°ì²´(object)ì¸ {A[1]: [ A[2], A[3], A[4], A[5], ....., A[N] ], B[1]: [ B[2], B[3], B[4], B[5], B[6], ...., B[N] ], ....., Z[1]: [ Z[2], ...., Z[N] ]} í˜•ì‹ìœ¼ë¡œ í‘œí˜„í•´ì¤˜. ê·¸ë¦¬ê³  ëŒ€ì²´í•  ìˆ˜ ìžˆëŠ” ë‹¨ì–´ëŠ” ìµœì†Œ 10ê°œ ì´ìƒ ë½‘ì•„ì£¼ë©´ ì¢‹ê² ì–´. ê·¸ë¦¬ê³  í•´ë‹¹ ë‹¨ì–´ë¥¼ ë½‘ëŠ” ê¸°ì¤€ì€ í•´ë‹¹ ë‹¨ì–´ë¡œ êµì²´í–ˆì„ ë•Œ ê¸°ì¡´ ë¬¸ìž¥ê³¼ì˜ ì˜ë¯¸ì™€ëŠ” ë‹¬ë¼ì§ˆ ìˆ˜ ìžˆê²Œë” í•´ì¤˜. ëŒ€ì‹  ë³„ë‹¤ë¥¸ ê°€ì´ë“œ ë¬¸êµ¬ë‚˜ ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì—†ì´ ë°ì´í„° í˜•íƒœë¡œë§Œ ë„˜ê²¨ì¤˜. `,
    sentence2: `ë¨¼ì € ì•„ëž˜ ê¸€ì—ì„œ ë¬¸ìž¥ ê¸°ì¤€ìœ¼ë¡œ ë¬¸ìžì—´ì„ ë½‘ì•„ì¤˜. ë¬¸ìž¥ ê¸°ì¤€ìœ¼ë¡œ ë½‘ì€ ë¬¸ìžì—´ë“¤ì„ A, B, C, D ~ Zë¼ê³  ê°€ì •í•˜ìž. ê·¸ë¦¬ê³  ê°ê°ì˜ ë¬¸ìž¥ë“¤ê³¼ ê°™ì€ ì˜ë¯¸ë¥¼ ê°€ì§€ì§€ë§Œ ë‹¤ë¥¸ ë¬¸ìžê°’(í•œêµ­ì–´)ì„ ê°€ì§€ëŠ” ê²ƒë“¤ì„ ê°ê° ìµœëŒ€ 10ê°œì”© ë½‘ì•„ì£¼ê³ , ë½‘ì€ 10ê°œì˜ ë¬¸ìž¥ë“¤ì„ Aì— ëŒ€í•´ì„œëŠ” A1 ~ A10, Bì— ëŒ€í•´ì„œëŠ” B1 ~ B10 ì´ë¼ê³  ê°€ì •í–ˆì„ ë•Œ, ë°ì´í„°ë¥¼ javascriptì˜ ê°ì²´(object) {A: [A1, A2, A3, A4, A5, A6, A7, A8, A9, A10], B: [B1, B2, B3, B4, B5, ..., B10], ...., Z: [Z1, Z2, Z3, ...., Z10]}ì™€ ê°™ì€ í˜•íƒœë¡œ ë½‘ì•„ì¤˜. ëŒ€ì‹  A1 ~ A10ì„ ìƒì„±í• ë–„ëŠ” ìµœì†Œí•œ ë¬¸ìž¥ ë‚´ë¶€ì˜ 2ê°œ ì´ìƒì˜ ë‹¨ì–´ë“¤ë„ ì˜ë¯¸ëŠ” ê°™ì§€ë§Œ ë¬¸ìžì—´ì€ ë‹¤ë¥´ê²Œ ê°™ì´ ë°”ê¿”ì£¼ë©´ ì¢‹ê² ì–´. ëŒ€ì‹  ë³„ë‹¤ë¥¸ ê°€ì´ë“œ ë¬¸êµ¬ë‚˜ ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì—†ì´ ë°ì´í„°ë§Œ ì¶œë ¥í•´ì¤˜. ì˜ˆë¥¼ ë“¤ë©´ "ê³„ì—„ì€ êµ­ê°€ ìµœê³  ì§€ë„ìžê°€ ë¬¼ë¦¬ë ¥ì„ ì ê·¹ì ìœ¼ë¡œ ë™ì›í•˜ëŠ” ì¡°ì¹˜ë¡œ, êµ°ì‚¬ì •ê¶Œ ì‹œê¸°ì˜ ëŒ€í•œë¯¼êµ­ì²˜ëŸ¼ ê¶Œë ¥ìžì˜ ì˜ë„ì— ë”°ë¼ ë‚¨ìš©ë  ì†Œì§€ê°€ ìžˆëŠ” ì œë„ë‹¤. ëŒ€í•œë¯¼êµ­ì˜ ê²½ìš°, ê³„ì—„ í•´ì œ ê¶Œí•œì€ ëŒ€í†µë ¹ê³¼ êµ­íšŒì—ë§Œ ì£¼ì–´ì ¸ ìžˆë‹¤." ë¼ëŠ” ê¸€ì´ ìžˆë‹¤ë©´, {"ê³„ì—„ì€ êµ­ê°€ ìµœê³  ì§€ë„ìžê°€ ë¬¼ë¦¬ë ¥ì„ ì ê·¹ì ìœ¼ë¡œ ë™ì›í•˜ëŠ” ì¡°ì¹˜ë¡œ, êµ°ì‚¬ì •ê¶Œ ì‹œê¸°ì˜ ëŒ€í•œë¯¼êµ­ì²˜ëŸ¼ ê¶Œë ¥ìžì˜ ì˜ë„ì— ë”°ë¼ ë‚¨ìš©ë  ì†Œì§€ê°€ ìžˆëŠ” ì œë„ë‹¤.": ["ê³„ì—„ì€ êµ­ê°€ ìµœê³  ì§€ë„ìžê°€ ë¬¼ë¦¬ë ¥ì„ ì ê·¹ì ìœ¼ë¡œ ë™ì›í•˜ëŠ” ì¡°ì¹˜ë¡œ, êµ°ì‚¬ì •ê¶Œ ì‹œê¸°ì˜ ëŒ€í•œë¯¼êµ­ì²˜ëŸ¼ ê¶Œë ¥ìžì˜ ì˜ë„ì— ë”°ë¼ ë‚¨ìš©ë  ì†Œì§€ê°€ ìžˆëŠ” ì œë„ë‹¤.", "ê³„ì—„ì€ êµ­ê°€ì˜ ìµœê³  ì§€ë„ìžê°€ ë¬¼ë¦¬ì  íž˜ì„ ì‚¬ìš©í•˜ì—¬ ì·¨í•˜ëŠ” ì¡°ì¹˜ë¡œ, êµ°ì‚¬ ì •ê¶Œì˜ ëŒ€í•œë¯¼êµ­ì²˜ëŸ¼ ê¶Œë ¥ìžì˜ ì˜ë„ì— ë”°ë¼ ì˜¤ìš©ë  ì—¬ì§€ê°€ ìžˆëŠ” ì œë„ë‹¤."], "ëŒ€í•œë¯¼êµ­ì˜ ê²½ìš°, ê³„ì—„ í•´ì œ ê¶Œí•œì€ ëŒ€í†µë ¹ê³¼ êµ­íšŒì—ë§Œ ì£¼ì–´ì ¸ ìžˆë‹¤.": ["ëŒ€í•œë¯¼êµ­ì˜ ê²½ìš°, ê³„ì—„ í•´ì œ ê¶Œí•œì€ ëŒ€í†µë ¹ê³¼ êµ­íšŒì—ë§Œ ì£¼ì–´ì ¸ ìžˆë‹¤.", ""ëŒ€í•œë¯¼êµ­ì—ì„œëŠ” ê³„ì—„ í•´ì œ ê¶Œí•œì´ ì˜¤ì§ ëŒ€í†µë ¹ê³¼ êµ­íšŒì—ë§Œ ë¶€ì—¬ëœë‹¤.""]} ì´ë ‡ê²Œ ì¶œë ¥í•´ì£¼ë©´ ë˜ëŠ”ê±°ì•¼. ì£¼ì˜í•  ì ì€ {A: [], B: []} ì´ë ‡ê²Œ ì¶œë ¥ë˜ë©´ ì•ˆë˜ê³  ì•„ë‹ˆë¼, ê°ì²´ì˜ Keyì¸ Aì™€ Bê°€ ë¬¸ìž¥ë‹¨ìœ„ë¡œ ëŠì—ˆë˜ ì›ë³¸ í…ìŠ¤íŠ¸ ë¬¸ìžì—´ì´ì—¬ì•¼ í•´.`,
    sentence: `ì•„ëž˜ ë¬¸ìž¥ê³¼ ë™ì¼í•œ ì˜ë¯¸ë¥¼ ê°™ì§€ë§Œ, ë¬¸ìžì—´ë§Œ ë‹¤ë¥¸ ë¬¸ìž¥ì„ ìµœëŒ€ 10ê°œ ë½‘ì•„ì£¼ê³ , í•´ë‹¹ ë¬¸ìž¥ë“¤ì„ Javascript ë°°ì—´ í˜•íƒœë¡œ ë½‘ì•„ì¤˜. ëŒ€ì‹  í•´ë‹¹ ë¬¸ìžì—´ë“¤ì€ ê°ê° ì œì¼ ë°”ê¹¥ì€ "ë¡œ ê°ì‹¸ì£¼ê³ , ë‚´ë¶€ì— ë˜ë‹¤ë¥¸ "ë“¤ì€ â€œ í˜¹ì€ â€˜ë¡œ êµì²´í•´ì¤˜(Javascriptì˜ JSON.parse ì—ëŸ¬ë¥¼ í”¼í•˜ê¸° ìœ„í•´ì„œì•¼). ê·¸ëŸ¬ê¸°ìœ„í•´ì„œëŠ” ì ì ˆí•˜ê²Œ "(double quotes), '(single quotes)ë“¤ì„ ë°”ê¿”ì¤˜. ì¡°ê±´ì€ ê° ë¬¸ìž¥ì—ì„œ ìµœì†Œ 2ê°œ ì´ìƒì˜ ë‹¨ì–´ë“¤ì„ ì˜ë¯¸ëŠ” ê°™ì§€ë§Œ ë¬¸ìžì—´ì€ ë‹¤ë¥´ê²Œ ê°™ì´ ë°”ê¿”ì£¼ë©´ ì¢‹ê² ì–´. ì¶œë ¥ë˜ëŠ” í˜•íƒœëŠ” ë³„ë‹¤ë¥¸ ê°€ì´ë“œ ë¬¸êµ¬ë‚˜ ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì—†ì´ ë°ì´í„°ë§Œ ì¶œë ¥í•´ì¤˜.`,
    keyword2: `ì•„ëž˜ ë¬¸ìž¥ì—ì„œ ë‹¨ì–´ë“¤ì„ ë½‘ì•„ì„œ ê° ë‹¨ì–´ë“¤ì„ ëŒ€ì²´í•  ìˆ˜ ìžˆëŠ” ë‹¤ë¥¸ ë‹¨ì–´(ëœ»ì€ ë¹„ìŠ·í•˜ê³  ë¬¸ìžì—´ë§Œ ë‹¤ë¥¸ ë‹¨ì–´)ë“¤ì„ 10ê°œì”© ë½‘ì•„ì£¼ë©´ ë¼. ì¶œë ¥í˜•íƒœëŠ” ì˜ˆë¥¼ ë“¤ì–´ì„œ ë¬¸ìž¥ì—ì„œ "ì´í‹€"ê³¼ "ì´"ì„ íƒ€ê²Ÿìœ¼ë¡œ ìž¡ì•˜ì„ ë•Œ {"ì´í‹€": [ "2ì¼", "ì–‘ì¼", "ë‘ë‚ ", "ì´ì¼", "ìŒì¼", "ì´í‹€ê°„", "48ì‹œê°„", "ì—°ì´í‹€", "ì—°ì† ì´í‹€", "ì´í‹€ì§œë¦¬" ], "ì´": [ "ì „ì²´", "í•©ê³„", "ì „ë¶€", "í•©ì‚°", "ì´í•©", "ëª¨ë‘", "ì´ëŸ‰", "ì´ê³„", "ì „ì²´", "ì´ì•¡" ]} ì´ëŸ°ì‹ì˜ Javascriptì˜ Object êµ¬ì¡°ë¡œ ì¶œë ¥í•´ì£¼ë©´ ë¼. ë°©ê¸ˆ ë§í•œ "ì´í‹€"ê³¼ "ì´"ì€ ì˜ˆì‹œ ë°ì´í„°ë‹ˆê¹ í¬í•¨ì‹œí‚¤ë©´ ì•ˆë¼. ë°˜ë“œì‹œ ì•„ëž˜ ë¬¸ìž¥ì„ ê¸°ì¤€ìœ¼ë¡œ Object ë°ì´í„°ë¥¼ ë½‘ì•„ì¤˜ì•¼ í•´. ê·¸ë¦¬ê³  ë³„ë‹¤ë¥¸ ê°€ì´ë“œ ë¬¸êµ¬ë‚˜ ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì—†ì´ ë°ì´í„°ë§Œ ì¶œë ¥í•´ì¤˜(ë„ˆê°€ ì¶œë ¥í•´ì¤€ ë°ì´í„°ë¥¼ JSON.parseë¥¼ ì ìš©í–ˆì„ ë•Œ errorê°€ ë°œìƒí•˜ë©´ ì•ˆë¼.). `,
  };
  return mapTypeToPrompt[type];
};

const getPrompt = (type, article) => {
  return getMainPrompt(type) + "\n\n" + article;
};

const getPromptForProcessingArticle = (article, withStructure = false) => {
  return `${getPostPositionPrompt(withStructure)}` + "\n\n" + article;
};

const getBody = (model, content) => {
  return {
    model,
    messages: [{ role: "user", content }],
    temperature: 0.7,
  };
};

const MODELS = {
  ["3.5"]: "gpt-3.5-turbo",
  ["4.0"]: "gpt-4o",
};

module.exports = {
  openAiApiUrl,
  getPrompt,
  getPromptForProcessingArticle,
  getBody,
  MODELS,
};
